/**********************************************************************************************************
*                                              USART
                    *						Módulo para trabajar con la USART
*
*						<Copyright>
*
*						<Copyright or distribution terms>
*
*
*********************************************************************************************************/

/*********************************************************************************************************
*                                               PR_USART.c
*
* Filename	: PR_USART.c
* Version	: 1.0.0					
* Programmer(s) : NEF
**********************************************************************************************************
*  Note(s):
*
*
*
*********************************************************************************************************/

/*********************************************************************************************************
 *
 * \file		PR_USART.c
 * \brief		Módulo para trabajar con la UART
 * \date		1 de octubre de 2019
 * \author		Nicolas Ferragamo nferragamo@est.frba.utn.edu.ar
 * \version     1.0.0
*********************************************************************************************************/

/*********************************************************************************************************
 *** INCLUDES
*********************************************************************************************************/

#include <xc.h>
#include "USART.h"

#if SHIELD_ACTIVO == __SHIELD2
/*********************************************************************************************************
 *** DEFINES PRIVADOS AL MODULO
*********************************************************************************************************/

/*********************************************************************************************************
 *** MACROS PRIVADAS AL MODULO
*********************************************************************************************************/

/*********************************************************************************************************
 *** TIPOS DE DATOS PRIVADOS AL MODULO
*********************************************************************************************************/

/*********************************************************************************************************
 *** TABLAS PRIVADAS AL MODULO
*********************************************************************************************************/

/*********************************************************************************************************
 *** VARIABLES GLOBALES PUBLICAS
*********************************************************************************************************/

/*********************************************************************************************************
 *** VARIABLES GLOBALES PRIVADAS AL MODULO
*********************************************************************************************************/

/*********************************************************************************************************
 *** PROTOTIPO DE FUNCIONES PRIVADAS AL MODULO
*********************************************************************************************************/

/*********************************************************************************************************
 *** FUNCIONES PRIVADAS AL MODULO
*********************************************************************************************************/

/*********************************************************************************************************
 *** FUNCIONES GLOBALES AL MODULO
*********************************************************************************************************/

/**
	\fn  		void USART_CharTx (uint8_t Dato);
	\brief 		Se encarga de enviar un caracter por la USART
 	\author 	
 	\date 		
 	\param [in]     Dato   caracter a transmitir
 	\param [out] 	void
*/
void USART_CharTx (uint8_t Dato)
{
    TXSTAbits.TXEN = 1;                 //habilita el transmisor
    TXREG          = Dato;                     //carga el transmisor con el Dato a transmitir
    while(!TXSTAbits.TRMT);           //espera a que se vacie el registro de transmisión
    TXSTAbits.TXEN = 0;                 //apaga el transmisor
}

/**
	\fn  		void USART_MsgTx (uint8_t Dato);
	\brief 		Se encarga de enviar un mensaje por la USART
 	\author 	
 	\date 		
 	\param [in]     *dato     mensaje a transmitir
 *  \param [in]     longitud  longitud del mensaje a transmitir
 	\param [out] 	void
*/
void USART_MsgTx (uint8_t *dato, uint8_t longitud)
{
    uint8_t i=0;
    for(i=0; i < longitud; i++) USART_CharTx (dato[i]);   //transmite el dato
}

#endif /* SHIELD_ACTIVO */